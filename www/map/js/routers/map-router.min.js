suApp.router.MapRouter=Backbone.Router.extend({routes:{restaurants:"restaurants",computerLabs:"computerLabs",auditoriums:"auditoriums",buildings:"buildings",parkingspaces:"parkingspaces",departments:"departments","*actions":"defaultRoute"},defaultRoute:function(a){(new suApp.view.AppView({el:$("#page-map"),model:new suApp.model.AppModel})).render();$("#page-map").trigger("pagecreate")},restaurants:function(){var a=new suApp.view.AppView({el:$("#page-map"),model:new suApp.model.AppModel({types:["restaurant"],
filterByCampus:!0}),title:"map.titles.restaurants"});a.render();a.updateLocations()},computerLabs:function(){var a=new suApp.view.AppView({el:$("#page-map"),model:new suApp.model.AppModel({types:["computerlab"]}),title:"map.titles.computerlabs"});a.render();a.updateLocations()},auditoriums:function(){var a=new suApp.view.AppView({el:$("#page-map"),model:new suApp.model.AppModel({types:["auditorium"]}),title:"map.titles.auditoriums"});a.render();a.updateLocations()},buildings:function(){var a=new suApp.view.AppView({el:$("#page-map"),
model:new suApp.model.AppModel({menu:!0,types:["building","entrance","elevator","toilet"],nonVisibleTypes:["entrance","elevator","toilet"]}),title:"map.titles.buildings"});a.render();a.updateLocations()},parkingspaces:function(){var a=new suApp.model.AppModel({filterByCampus:!0,types:["parking","handicap_parking","entrance"],nonVisibleTypes:["entrance"],zoomSensitive:!0}),b=new suApp.view.AppView({el:$("#page-map"),model:a,title:"map.titles.parking"}),c=this;a.locations.on("reset",function(){c.handleParkingspaceLocationsReset(b,
a)});b.on("toggleMarkerVisibility",this.handleParkingspaceMarkerVisibility);b.render();b.updateLocations()},departments:function(){var a=new suApp.view.AppView({el:$("#page-map"),model:new suApp.model.AppModel({types:["organization"]}),title:"map.titles.departments"});a.render();a.updateLocations()},handleParkingspaceMarkerVisibility:function(a,b){a.each(function(a){"entrance"==a.get("type")&&(!0===a.get("handicapAdapted")?a.set("visible",b):a.set("visible",!1))})},handleParkingspaceLocationsReset:function(a,
b){b.set("zoomSensitive",!0);b.locations.byType(["parking","handicap_parking"]).each(function(c){c.on("clicked",function(){b.set("zoomSensitive",!1);a.trigger("toggleMarkerVisibility",b.locations,!0)})})}});