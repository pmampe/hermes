suApp.view.MenuPopupView=Backbone.View.extend({initialize:function(a){_.bindAll(this,"render","selectCampus","updateCampuses");this.campuses=a.campuses;this.searchView=a.searchView;a=$('div[data-role\x3d"header"]');a=0<a.size()?a.position().top+a.height():0;$("\x3cstyle\x3e").text(".menupopup-margin { margin-top: "+Math.round(a)+"px; }").appendTo("head");this.$el.parent().addClass("menupopup-margin");this.$el.parent().addClass("menupopup");this.campuses.on("reset",this.updateCampuses,this);this.$el.on("popupafteropen",
this.buttonPress);this.$el.on("popupafterclose",this.buttonUnpress)},events:{"click .campus-link":"selectCampus"},render:function(){$(document).find("[data-role\x3d'popup']:not([id\x3d'menupopup'])").each(function(){$(this).popup("close")});this.searchView.hideFilteredList();this.$el.popup("open")},selectCampus:function(a){var b=$(a.target).closest("li").get(0).id.split("campus-")[1];this.trigger("selected",this.campuses.get(b));this.$el.popup("close");a.stopImmediatePropagation()},updateCampuses:function(){$("#menupopupList").find("li").remove();
$("#menupopupList").append("\x3cli class\x3d'campus-header no-li-styling' data-theme\x3d'y'\x3e\x3cp data-i18n\x3d'map.campusList.choosecampus'\x3e Choose\x26nbsp;campus:\x3c/p\x3e\x3c/li\x3e");this.campuses.each(function(a){$("#menupopupList").append("\x3cli class\x3d'campus-link' id\x3d'campus-"+a.get("id")+"' data-icon\x3d'false' data-theme\x3d'b'\x3e\x3ca href\x3d'javascript://nop'\x3e"+a.get("name")+"\x3c/a\x3e\x3c/li\x3e")});$("#menupopupList").i18n();$("#menupopupList").listview();$("#menupopupList").listview("refresh")},
buttonPress:function(){$(document).find("a#menubutton").addClass("selected")},buttonUnpress:function(){$(document).find("a#menubutton").removeClass("selected")}});